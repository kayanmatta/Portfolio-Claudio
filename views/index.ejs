<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portf√≥lio - Kayan dos Santos da Matta</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üåä</text></svg>">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="profile-header">
            <div class="profile-image-container">
                <img src="/images/foto minha.jpg" alt="Foto de Kayan dos Santos da Matta" class="profile-image">
            </div>
            <div class="profile-info">
                <h1><%= pessoa.nome %></h1>
                <p><strong>Github:</strong> <%= pessoa.github %></p>
                <p><strong>LinkedIn:</strong> <%= pessoa.linkedin %></p>
                <p><strong>Telefone:</strong> <%= pessoa.telefone %></p>
                <p><strong>Email:</strong> <%= pessoa.email %></p>
                <p><strong>Endere√ßo:</strong> <%= pessoa.endereco %></p>
                <div class="description">
                    <h3>Sobre mim</h3>
                    <p><%= pessoa.descricao %></p>
                </div>
            </div>
        </div>
        
        <div class="section-card">
            <h2 class="section-title">Forma√ß√£o Acad√™mica</h2>
            <ul>
                <% formacao.forEach(function(item) { %>
                    <li><%= item.nivel %> - <%= item.instituicao %> (<%= item.ano %>)</li>
                <% }) %>
            </ul>
        </div>
        
        <div class="section-card">
            <h2 class="section-title">Cursos</h2>
            <ul>
                <% cursos.forEach(function(item) { %>
                    <li><%= item.nome %> - <%= item.instituicao %> (<%= item.ano %>)</li>
                <% }) %>
            </ul>
        </div>
        
        <div class="section-card">
            <h2 class="section-title">Projetos Desenvolvidos</h2>
            <ul>
                <% projetos.forEach(function(item) { %>
                    <li><%= item.nome %> - <%= item.descricao %></li>
                <% }) %>
            </ul>
        </div>
        
        <div class="section-card">
            <h2 class="section-title">Compet√™ncias T√©cnicas e Interpessoais</h2>
            <ul>
                <% competencias.forEach(function(item) { %>
                    <li><%= typeof item === 'object' ? item.nome : item %></li>
                <% }) %>
            </ul>
        </div>
        
        <div class="section-card">
            <h2 class="section-title">Links para Redes Profissionais</h2>
            <ul>
                <% links.forEach(function(item) { %>
                    <li><a href="<%= item.url %>"><%= item.nome %></a></li>
                <% }) %>
            </ul>
        </div>
        
        <div class="section-card">
            <h2 class="section-title">Adicionar novo item</h2>
            <button onclick="limparFormularioInserir()">Limpar</button>
            <button onclick="opcaoPessoa()">Pessoa</button>
            <button onclick="opcaoFormacao()">Formacao</button>
            <button onclick="opcaoCurso()">Curso</button>
            <button onclick="opcaoProjeto()">Projeto</button>
            <button onclick="opcaoCompetencia()">Competencia</button>
            <button onclick="opcaoLink()">Link</button>
            <div id="formulario"></div>
        </div>
        
        <div class="section-card">
            <h2 class="section-title">Excluir itens</h2>
            <button onclick="limparFormularioExcluir()">Limpar</button>
            <button onclick="excluirFormacao()">Excluir forma√ß√£o</button>
            <button onclick="excluirCurso()">Excluir curso</button>
            <button onclick="excluirProjeto()">Excluir projeto</button>
            <button onclick="excluirCompetencia()">Excluir competencia</button>
            <button onclick="excluirLink()">Excluir link</button>
            <div id="formularioExcluir"></div>
        </div>
        
        <div class="section-card">
            <h2 class="section-title">Editar itens</h2>
            <button onclick="limparFormularioExcluir()">Limpar</button>
            <button onclick="editarFormacao()">Editar forma√ß√£o</button>
            <button onclick="editarCurso()">Editar curso</button>
            <button onclick="editarProjeto()">Editar projeto</button>
            <button onclick="editarCompetencia()">Editar competencia</button>
            <button onclick="editarLink()">Editar link</button>
            <div id="formularioEditar"></div>
        </div>
        
        <div class="footer">
            <p>¬© 2025 Kayan dos Santos da Matta - Navegando pelas correntes do conhecimento</p>
        </div>
    </div>
    
    <!-- Dados para uso no JavaScript -->
    <div id="dados-js" style="display:none;">
        <span id="formacao-data"><%= JSON.stringify(formacao) %></span>
        <span id="cursos-data"><%= JSON.stringify(cursos) %></span>
        <span id="projetos-data"><%= JSON.stringify(projetos) %></span>
        <span id="competencias-data"><%= JSON.stringify(competencias) %></span>
        <span id="links-data"><%= JSON.stringify(links) %></span>
    </div>
</body>
</html>

<script>
    // Inicializar dados a partir do HTML
    var dadosFormacao = JSON.parse(document.getElementById('formacao-data').textContent);
    var dadosCursos = JSON.parse(document.getElementById('cursos-data').textContent);
    var dadosProjetos = JSON.parse(document.getElementById('projetos-data').textContent);
    var dadosCompetencias = JSON.parse(document.getElementById('competencias-data').textContent);
    var dadosLinks = JSON.parse(document.getElementById('links-data').textContent);
    
    function limparFormularioInserir() {
        document.getElementById("formulario").innerHTML = "";
    }
    function limparFormularioExcluir() {
        document.getElementById("formularioExcluir").innerHTML = "";
        document.getElementById("formularioEditar").innerHTML = "";
    }
    function opcaoPessoa() {
        html = `
        <form action="/adicionar" method="post">
            <input type="hidden" name="opcao" value="pessoa">
                <label>Nome: <input type="text" name="pessoa[nome]" value="<%= pessoa.nome %>"></label><br>
                <label>Github: <input type="text" name="pessoa[github]" value="<%= pessoa.github %>"></label><br>
                <label>LinkedIn: <input type="text" name="pessoa[linkedin]" value="<%= pessoa.linkedin %>"></label><br>
                <label>Telefone: <input type="text" name="pessoa[telefone]" value="<%= pessoa.telefone %>"></label><br>
                <label>Email: <input type="text" name="pessoa[email]" value="<%= pessoa.email %>"></label><br>
                <label>Endere√ßo: <input type="text" name="pessoa[endereco]" value="<%= pessoa.endereco %>"></label><br>
                <label>Descri√ß√£o: <textarea name="pessoa[descricao]"><%= pessoa.descricao %></textarea></label><br>
                <button type="submit">Enviar</button>
            </form>
        `;
        document.getElementById("formulario").innerHTML = html;
    }
    function opcaoFormacao() {
        html = `
        <form action="/adicionar" method="post">
            <input type="hidden" name="opcao" value="formacao">
                <label>Nome: <input type="text" name="formacao[nome]"></label><br>
                <label>N√≠vel: <input type="text" name="formacao[nivel]"></label><br>
                <label>Institui√ß√£o: <input type="text" name="formacao[instituicao]"></label><br>
                <label>Ano: <input type="text" name="formacao[ano]"></label><br>
                <button type="submit">Enviar</button>
            </form>
        `;
        document.getElementById("formulario").innerHTML = html;
    }
    function opcaoCurso() {
        html = `
        <form action="/adicionar" method="post">
            <input type="hidden" name="opcao" value="curso">
                <label>Nome: <input type="text" name="curso[nome]"></label><br>
                <label>Institui√ß√£o: <input type="text" name="curso[instituicao]"></label><br>
                <label>Ano: <input type="text" name="curso[ano]"></label><br>
                <button type="submit">Enviar</button>
            </form>
        `;
        document.getElementById("formulario").innerHTML = html;
    }
    function opcaoProjeto() {
        html = `
        <form action="/adicionar" method="post">
            <input type="hidden" name="opcao" value="projeto">
                <label>Nome: <input type="text" name="projeto[nome]"></label><br>
                <label>Descri√ß√£o: <textarea name="projeto[descricao]"></textarea></label><br>
                <button type="submit">Enviar</button>
            </form>
        `;
        document.getElementById("formulario").innerHTML = html;
    }
    function opcaoCompetencia() {
        html = `
        <form action="/adicionar" method="post">
            <input type="hidden" name="opcao" value="competencia">
                <label>Compet√™ncia: <textarea name="competencia"></textarea></label><br>
                <button type="submit">Enviar</button>
            </form>
        `;
        document.getElementById("formulario").innerHTML = html;
    }
    function opcaoLink() {
        html = `
        <form action="/adicionar" method="post">
            <input type="hidden" name="opcao" value="link">
                <label>Nome: <input type="text" name="link[nome]"></label><br>
                <label>URL: <input type="text" name="link[url]"></label><br>
                <button type="submit">Enviar</button>
            </form>
        `;
        document.getElementById("formulario").innerHTML = html;
    }

    function excluirLink(){
        html = `
        <form action="/excluir?_method=DELETE" method="post">
              <input type="hidden" name="opcao" value="link">
            <select name="id">
                <% links.forEach(function(item, index) { %>
                    <option value="<%= index %>"><%= item.nome %> - <%= item.url %></option>
                <% }) %>
            </select>
            <button type="submit">Excluir</button>
        </form>
    `;
        document.getElementById("formularioExcluir").innerHTML = html;
    }

    function excluirFormacao(){
        html = `
        <form action="/excluir?_method=DELETE" method="post">
            <input type="hidden" name="opcao" value="formacao">
            <select name="id">
                <% formacao.forEach(function(item, index) { %>
                    <option value="<%= index %>"><%= item.nivel %> - <%= item.instituicao %> (<%= item.ano %>)</option>
                <% }) %>
            </select>
            <button type="submit">Excluir</button>
        </form>
    `;
        document.getElementById("formularioExcluir").innerHTML = html;
    }

    function excluirCurso(){
        html = `
        <form action="/excluir?_method=DELETE" method="post">
            <input type="hidden" name="opcao" value="curso">
            <select name="id">
                <% cursos.forEach(function(item, index) { %>
                    <option value="<%= index %>"><%= item.nome %> - <%= item.instituicao %> (<%= item.ano %>)</option>
                <% }) %>
            </select>
            <button type="submit">Excluir</button>
        </form>
    `;
        document.getElementById("formularioExcluir").innerHTML = html;
    }

    function excluirProjeto(){
        html = `
        <form action="/excluir?_method=DELETE" method="post">
            <input type="hidden" name="opcao" value="projeto">
            <select name="id">
                <% projetos.forEach(function(item, index) { %>
                    <option value="<%= index %>"><%= item.nome %> - <%= item.descricao %></option>
                <% }) %>
            </select>
            <button type="submit">Excluir</button>
        </form>
    `;
        document.getElementById("formularioExcluir").innerHTML = html;
    }

    function excluirCompetencia(){
        html = `
        <form action="/excluir?_method=DELETE" method="post">
            <input type="hidden" name="opcao" value="competencia">
            <select name="id">
                <% competencias.forEach(function(item, index) { %>
                    <option value="<%= index %>"><%= item %></option>
                <% }) %>
            </select>
            <button type="submit">Excluir</button>
        </form>
    `;
        document.getElementById("formularioExcluir").innerHTML = html;
    }

    // Fun√ß√µes para editar itens
    function editarFormacao(){
        html = `
        <form action="/editar?_method=PUT" method="post">
            <input type="hidden" name="opcao" value="formacao">
            <select name="id" onchange="preencherFormacao(this)">
                <option value="">Selecione uma forma√ß√£o</option>
                <% formacao.forEach(function(item, index) { %>
                    <option value="<%= index %>"><%= item.nivel %> - <%= item.instituicao %> (<%= item.ano %>)</option>
                <% }) %>
            </select>
            <div id="formFormacao" style="display:none;">
                <label>Nome: <input type="text" name="formacao[nome]" id="formacaoNome"></label><br>
                <label>N√≠vel: <input type="text" name="formacao[nivel]" id="formacaoNivel"></label><br>
                <label>Institui√ß√£o: <input type="text" name="formacao[instituicao]" id="formacaoInstituicao"></label><br>
                <label>Ano: <input type="text" name="formacao[ano]" id="formacaoAno"></label><br>
            </div>
            <button type="submit">Atualizar</button>
        </form>
    `;
        document.getElementById("formularioEditar").innerHTML = html;
    }

    function preencherFormacao(select) {
        var id = select.value;
        if (id !== "") {
            var item = dadosFormacao[id];
            document.getElementById("formacaoNome").value = item.nome || "";
            document.getElementById("formacaoNivel").value = item.nivel || "";
            document.getElementById("formacaoInstituicao").value = item.instituicao || "";
            document.getElementById("formacaoAno").value = item.ano || "";
            document.getElementById("formFormacao").style.display = "block";
        } else {
            document.getElementById("formFormacao").style.display = "none";
        }
    }

    function editarCurso(){
        html = `
        <form action="/editar?_method=PUT" method="post">
            <input type="hidden" name="opcao" value="curso">
            <select name="id" onchange="preencherCurso(this)">
                <option value="">Selecione um curso</option>
                <% cursos.forEach(function(item, index) { %>
                    <option value="<%= index %>"><%= item.nome %> - <%= item.instituicao %> (<%= item.ano %>)</option>
                <% }) %>
            </select>
            <div id="formCurso" style="display:none;">
                <label>Nome: <input type="text" name="curso[nome]" id="cursoNome"></label><br>
                <label>Institui√ß√£o: <input type="text" name="curso[instituicao]" id="cursoInstituicao"></label><br>
                <label>Ano: <input type="text" name="curso[ano]" id="cursoAno"></label><br>
            </div>
            <button type="submit">Atualizar</button>
        </form>
    `;
        document.getElementById("formularioEditar").innerHTML = html;
    }

    function preencherCurso(select) {
        var id = select.value;
        if (id !== "") {
            var item = dadosCursos[id];
            document.getElementById("cursoNome").value = item.nome || "";
            document.getElementById("cursoInstituicao").value = item.instituicao || "";
            document.getElementById("cursoAno").value = item.ano || "";
            document.getElementById("formCurso").style.display = "block";
        } else {
            document.getElementById("formCurso").style.display = "none";
        }
    }

    function editarProjeto(){
        html = `
        <form action="/editar?_method=PUT" method="post">
            <input type="hidden" name="opcao" value="projeto">
            <select name="id" onchange="preencherProjeto(this)">
                <option value="">Selecione um projeto</option>
                <% projetos.forEach(function(item, index) { %>
                    <option value="<%= index %>"><%= item.nome %> - <%= item.descricao %></option>
                <% }) %>
            </select>
            <div id="formProjeto" style="display:none;">
                <label>Nome: <input type="text" name="projeto[nome]" id="projetoNome"></label><br>
                <label>Descri√ß√£o: <textarea name="projeto[descricao]" id="projetoDescricao"></textarea></label><br>
            </div>
            <button type="submit">Atualizar</button>
        </form>
    `;
        document.getElementById("formularioEditar").innerHTML = html;
    }

    function preencherProjeto(select) {
        var id = select.value;
        if (id !== "") {
            var item = dadosProjetos[id];
            document.getElementById("projetoNome").value = item.nome || "";
            document.getElementById("projetoDescricao").value = item.descricao || "";
            document.getElementById("formProjeto").style.display = "block";
        } else {
            document.getElementById("formProjeto").style.display = "none";
        }
    }

    function editarCompetencia(){
        html = `
        <form action="/editar?_method=PUT" method="post">
            <input type="hidden" name="opcao" value="competencia">
            <select name="id" onchange="preencherCompetencia(this)">
                <option value="">Selecione uma compet√™ncia</option>
                <% competencias.forEach(function(item, index) { %>
                    <option value="<%= index %>"><%= typeof item === 'object' ? item.nome : item %></option>
                <% }) %>
            </select>
            <div id="formCompetencia" style="display:none;">
                <label>Compet√™ncia: <textarea name="competencia" id="competenciaNome"></textarea></label><br>
            </div>
            <button type="submit">Atualizar</button>
        </form>
    `;
        document.getElementById("formularioEditar").innerHTML = html;
    }

    function preencherCompetencia(select) {
        var id = select.value;
        if (id !== "") {
            var item = dadosCompetencias[id];
            // Tratar tanto objetos quanto strings
            document.getElementById("competenciaNome").value = typeof item === 'object' ? item.nome : item;
            document.getElementById("formCompetencia").style.display = "block";
        } else {
            document.getElementById("formCompetencia").style.display = "none";
        }
    }

    function editarLink(){
        html = `
        <form action="/editar?_method=PUT" method="post">
            <input type="hidden" name="opcao" value="link">
            <select name="id" onchange="preencherLink(this)">
                <option value="">Selecione um link</option>
                <% links.forEach(function(item, index) { %>
                    <option value="<%= index %>"><%= item.nome %> - <%= item.url %></option>
                <% }) %>
            </select>
            <div id="formLink" style="display:none;">
                <label>Nome: <input type="text" name="link[nome]" id="linkNome"></label><br>
                <label>URL: <input type="text" name="link[url]" id="linkUrl"></label><br>
            </div>
            <button type="submit">Atualizar</button>
        </form>
    `;
        document.getElementById("formularioEditar").innerHTML = html;
    }

    function preencherLink(select) {
        var id = select.value;
        if (id !== "") {
            var item = dadosLinks[id];
            document.getElementById("linkNome").value = item.nome || "";
            document.getElementById("linkUrl").value = item.url || "";
            document.getElementById("formLink").style.display = "block";
        } else {
            document.getElementById("formLink").style.display = "none";
        }
    }
</script>